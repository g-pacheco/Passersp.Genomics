df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc)",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr, bolsa_insuf_estr)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc)",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc)",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr, bolsa_insuf_estr)
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr[is.na(df_bolsa_insuf_estr)] <- NA
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df_bolsa_insuf_estr[, -which(names(df) == "row_id")]
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr, bolsa_insuf_estr)
df_bolsa_insuf_estr[is.na(df_bolsa_insuf_estr)] <- NA
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df_bolsa_insuf_estr[, -which(names(df_bolsa_insuf_estr) == "row_id")]
View(df_bolsa_insuf_estr)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr, bolsa_insuf_estr)
df_bolsa_insuf_estr[is.na(df_bolsa_insuf_estr)] <- NA
df_bolsa_insuf_estr <- df_bolsa_insuf_estr[, -which(names(df_bolsa_insuf_estr) == "ID")]
View(df_bolsa_insuf_estr)
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr)
df_bolsa_insuf_estr_long <- gather(df_bolsa_insuf_estr, key = "ID")
View(df_bolsa_insuf_estr_long)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID", all = TRUE)
View(merged_df)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID", all = TRUE)
View(merged_df)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID")
View(df_bolsa_insuf_estr)
View(merged_df)
rm(list=ls())
# Loads packages ~
pacman::p_load(tidyverse, readxl, writexl, patchwork, cowplot, ggpubr, lemon, reshape2)
# Loads data ~
df <- read_excel("questionario_character.xlsx")[-1, ] %>%
filter(termo_consentimento == "Sim")
# Creates ID column ~
df <- cbind(ID = as.character(c(1:181)), df)
# Corrects Bolsa Modalidade ~
levels(df$bolsa_modalidade <- sub("Doutorado sanduíche", "Doutorado Sanduíche", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Doutorado pleno no exterior", "Doutorado Pleno", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Pós-doutorado no exterior", "Pós-doutorado", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Outra modalidade", "Outra Modalidade", df$bolsa_modalidade))
# Corrects Residência ~
levels(df$residencia <- sub("Resido no exterior", "Resido no Exterior", df$residencia))
# Corrects País ~
levels(df$pais <- sub("Holanda", "Países Baixos", df$pais))
# Corrects Estado ~
df$estado <- ifelse(df$estado %in% NA, "Prefiro não declarar", df$estado)
# Reorders Estado ~
df$estado <- factor(df$estado, ordered = T,
levels = c("AM", "BA", "CE", "DF", "GO", "MG", "MS", "MT", "PB", "PE",
"PR", "RJ", "RN", "RS", "SE", "SC", "SP",
"Já morava no país de destino",
"Morava em um terceiro país",
"Prefiro não declarar"))
# Reorders País ~
df$pais <- factor(df$pais, ordered = T,
levels = c("Alemanha", "Bélgica", "Canadá", "Dinamarca", "Espanha", "Estados Unidos",
"França", "Itália", "Países Baixos", "Portugal",
"Reino Unido", "Suécia", "Outro"))
# Reorders Modalidade da bolsa ~
df$bolsa_modalidade <- factor(df$bolsa_modalidade, ordered = T,
levels = c("Doutorado Sanduíche",
"Doutorado Pleno",
"Pós-doutorado",
"Outra Modalidade"))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
rm(list=ls())
# Loads packages ~
pacman::p_load(tidyverse, readxl, writexl, patchwork, cowplot, ggpubr, lemon, reshape2)
# Loads data ~
df <- read_excel("questionario_character.xlsx")[-1, ] %>%
filter(termo_consentimento == "Sim")
# Creates ID column ~
df <- cbind(ID = as.character(c(1:181)), df)
# Corrects Bolsa Modalidade ~
levels(df$bolsa_modalidade <- sub("Doutorado sanduíche", "Doutorado Sanduíche", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Doutorado pleno no exterior", "Doutorado Pleno", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Pós-doutorado no exterior", "Pós-doutorado", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Outra modalidade", "Outra Modalidade", df$bolsa_modalidade))
# Corrects Residência ~
levels(df$residencia <- sub("Resido no exterior", "Resido no Exterior", df$residencia))
# Corrects País ~
levels(df$pais <- sub("Holanda", "Países Baixos", df$pais))
# Corrects Estado ~
df$estado <- ifelse(df$estado %in% NA, "Prefiro não declarar", df$estado)
# Reorders Estado ~
df$estado <- factor(df$estado, ordered = T,
levels = c("AM", "BA", "CE", "DF", "GO", "MG", "MS", "MT", "PB", "PE",
"PR", "RJ", "RN", "RS", "SE", "SC", "SP",
"Já morava no país de destino",
"Morava em um terceiro país",
"Prefiro não declarar"))
# Reorders País ~
df$pais <- factor(df$pais, ordered = T,
levels = c("Alemanha", "Bélgica", "Canadá", "Dinamarca", "Espanha", "Estados Unidos",
"França", "Itália", "Países Baixos", "Portugal",
"Reino Unido", "Suécia", "Outro"))
# Reorders Modalidade da bolsa ~
df$bolsa_modalidade <- factor(df$bolsa_modalidade, ordered = T,
levels = c("Doutorado Sanduíche",
"Doutorado Pleno",
"Pós-doutorado",
"Outra Modalidade"))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("Economizei com gastos básicos (comida, aluguel, etc) ", "Economizei com gastos básicos (comida, aluguel, etc)", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
citation()
### The BEGINNING ~~~~~
##
# NLSparrow--PCA | First written by Homère J. Alves Monteiro with later modifications by George Pacheco ~
# Cleans the environment ~
rm(list=ls())
# Sets working directory ~
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Loads required packages ~
pacman::p_load(optparse, tidyverse, plyr, RColorBrewer, extrafont, ggforce, ggstar, ggrepel, RcppCNPy, reshape2, lemon, plotly,
gridExtra, grid, cowplot, patchwork, ggpubr, rphylopic)
# Loads data ~
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.FilteredUp.Weight2.Pruned.MAF40.cov"), header = FALSE, stringsAsFactors = FALSE)
# Loads annot ~
#annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
# Runs PCA ~
PCAauto <- eigen(dataauto)
PCAsex <- eigen(datasex)
### The BEGINNING ~~~~~
##
# NLSparrow--PCA | First written by Homère J. Alves Monteiro with later modifications by George Pacheco ~
# Cleans the environment ~
rm(list=ls())
# Sets working directory ~
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Loads required packages ~
pacman::p_load(optparse, tidyverse, plyr, RColorBrewer, extrafont, ggforce, ggstar, ggrepel, RcppCNPy, reshape2, lemon, plotly,
gridExtra, grid, cowplot, patchwork, ggpubr, rphylopic)
# Loads data ~
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.FilteredUp.Weight2.Pruned.MAF40.cov"), header = FALSE, stringsAsFactors = FALSE)
# Loads annot ~
#annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
# Runs PCA ~
PCAauto <- eigen(dataauto)
PCAsex <- eigen(datasex)
### The BEGINNING ~~~~~
##
# NLSparrow--PCA | First written by Homère J. Alves Monteiro with later modifications by George Pacheco ~
# Cleans the environment ~
rm(list=ls())
# Sets working directory ~
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Loads required packages ~
pacman::p_load(optparse, tidyverse, plyr, RColorBrewer, extrafont, ggforce, ggstar, ggrepel, RcppCNPy, reshape2, lemon, plotly,
gridExtra, grid, cowplot, patchwork, ggpubr, rphylopic)
# Loads data ~
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
#dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlyAutosomes.cov"), header = FALSE, stringsAsFactors = FALSE)
#datasex <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.Filtered.MAF20.Pruned.OnlySexual.cov"), header = FALSE, stringsAsFactors = FALSE)
dataauto <- as.matrix(read.table("AllSamples_haplotypecaller.raw.vcf.FilteredUp.Weight2.Pruned.MAF40.cov"), header = FALSE, stringsAsFactors = FALSE)
# Loads annot ~
#annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
annot <- read.table("NLSparrow.labels", sep = "\t", header = FALSE, stringsAsFactors = FALSE)
# Runs PCA ~
PCAauto <- eigen(dataauto)
# Merges the first 3 PCs with annot ~
PCAauto_Annot <- as.data.frame(cbind(annot, PCAauto$vectors[, c(1:3)])); colnames(PCAauto_Annot) <- c("Sample_ID", "PCA_1", "PCA_2", "PCA_3")
View(PCAauto_Annot)
